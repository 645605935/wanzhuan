<include file="Public/header"/>



		<!-- basic styles -->



		<link href="__PUBLIC__/Admin/assets/css/bootstrap.min.css" rel="stylesheet" />

		<link rel="stylesheet" href="__PUBLIC__/Admin/assets/css/font-awesome.min.css" />



		<!--[if IE 7]>

		  <link rel="stylesheet" href="__PUBLIC__/Admin/assets/css/font-awesome-ie7.min.css" />

		<![endif]-->



		<!-- page specific plugin styles -->



		<!-- fonts -->



		<link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/assets/css/google_font_css.css">

		<link rel="stylesheet" href="__PUBLIC__/Admin/layui-v1.0.4/layui/css/layui.css"  media="all">

		<!-- ace styles -->



		<link rel="stylesheet" href="__PUBLIC__/Admin/assets/css/ace.min.css" />

		<link rel="stylesheet" href="__PUBLIC__/Admin/assets/css/ace-rtl.min.css" />

		<link rel="stylesheet" href="__PUBLIC__/Admin/assets/css/ace-skins.min.css" />



		<!--[if lte IE 8]>

		  <link rel="stylesheet" href="__PUBLIC__/Admin/assets/css/ace-ie.min.css" />

		<![endif]-->



		<!-- inline styles related to this page -->



		<!-- ace settings handler -->



		<script src="__PUBLIC__/Admin/assets/js/ace-extra.min.js"></script>
		<script src="__PUBLIC__/Admin/assets/js/jquery.min.js"></script>


		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->



		<!--[if lt IE 9]>

		<script src="__PUBLIC__/Admin/assets/js/html5shiv.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/respond.min.js"></script>

		<![endif]-->

		<!-- layui.js   -->
		<script src="__PUBLIC__/Admin/layui-v1.0.4/layui/layui.js"></script>
		<script src="__PUBLIC__/layer/layer.js"></script>

	</head>



	<body>

		<div class="navbar navbar-default" id="navbar">

			<include file="Public/navbar"/>

		</div>



		<div class="main-container" id="main-container">

			<script type="text/javascript">

				try{ace.settings.check('main-container' , 'fixed')}catch(e){}

			</script>



			<div class="main-container-inner">

				<a class="menu-toggler" id="menu-toggler" href="#">

					<span class="menu-text"></span>

				</a>



				<div class="sidebar" id="sidebar">

					<include file="Public/left"/>

				</div>



				<div class="main-content">

					<div class="breadcrumbs" id="breadcrumbs">

						<script type="text/javascript">

							try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}

						</script>



						<ul class="breadcrumb">
							<include file="Public/_breadcrumb"/>
						</ul><!-- .breadcrumb -->



						<div class="nav-search" id="nav-search">

							<form class="form-search">

								<span class="input-icon">

									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />

									<i class="icon-search nav-search-icon"></i>

								</span>

							</form>

						</div><!-- #nav-search -->

					</div>



					<div class="page-content">

						<div class="row">
							<div class="col-xs-12">
							    <div class="panel panel-default">
							      <div class="panel-heading">权限列表
			      						<select name="pid_color" class="pid_color">
			      		                    <option value="">请选择分类</option>
			      		                    <foreach name="select" item="v">
			      		                    	<option value="{$v.id}" <if condition="$_POST['pid_color'] eq $v['id']">selected</if>>{$v.title}</option>
			      		                    </foreach>
			      		                </select>
					      				<label class="btn btn-info btn-xs"><input type="checkbox" class="no_node" value="1">非节点</label>
							      </div>
							      <div class="panel-body">
							        <table id="sample-table-1" class="table table-striped table-bordered table-hover">
										<thead>
											<tr>
												<th class="center">排序</th>
												<th>菜单名称</th>
												<th class="hidden-480">类型</th>
												<th>显示（左侧菜单栏）</th>
												<th class="hidden-480">状态</th>
												<th>操作</th>
											</tr>
										</thead>
										<tbody>
											{$html_tree}
										</tbody>
									</table>
							      </div>
							    </div>
							</div>	
						</div>

					</div><!-- /.page-content -->

				</div><!-- /.main-content -->


			</div><!-- /.main-container-inner -->



			<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">

				<i class="icon-double-angle-up icon-only bigger-110"></i>

			</a>

		</div><!-- /.main-container -->


		<!-- 底栏版本说明 -->
		<include file="Public/footer"/>
		<!-- basic scripts -->



		<!--[if !IE]> -->






		<!-- <![endif]-->



		<!--[if IE]>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<![endif]-->



		<!--[if !IE]> -->



		<script type="text/javascript">

			window.jQuery || document.write("<script src='assets/js/jquery-2.0.3.min.js'>"+"<"+"/script>");

		</script>



		<!-- <![endif]-->



		<!--[if IE]>

<script type="text/javascript">

 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");

</script>

<![endif]-->



		<script type="text/javascript">

			if("ontouchend" in document) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");

		</script>

		<script src="__PUBLIC__/Admin/assets/js/bootstrap.min.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/typeahead-bs2.min.js"></script>



		<!-- page specific plugin scripts -->



		<script src="__PUBLIC__/Admin/assets/js/jquery.dataTables.min.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/jquery.dataTables.bootstrap.js"></script>



		<!-- ace scripts -->



		<script src="http://localhost/zhangtr/ace_admin/assets/js/jquery-ui.custom.min.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/jquery.ui.touch-punch.min.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/bootbox.min.js"></script>

		<script src="http://localhost/zhangtr/ace_admin/assets/js/jquery.easypiechart.min.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/jquery.gritter.min.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/spin.min.js"></script>





		<script src="__PUBLIC__/Admin/assets/js/ace-elements.min.js"></script>

		<script src="__PUBLIC__/Admin/assets/js/ace.min.js"></script>



		<!-- inline scripts related to this page -->



		<script type="text/javascript">

			jQuery(function($) {

				var oTable1 = $('#sample-table-2').dataTable( {

				"aoColumns": [

			      { "bSortable": false },

			      null, null,null, null, null,

				  { "bSortable": false }

				] } );

				

				

				$('table th input:checkbox').on('click' , function(){

					var that = this;

					$(this).closest('table').find('tr > td:first-child input:checkbox')

					.each(function(){

						this.checked = that.checked;

						$(this).closest('tr').toggleClass('selected');

					});

						

				});

			

			

				$('[data-rel="tooltip"]').tooltip({placement: tooltip_placement});

				function tooltip_placement(context, source) {

					var $source = $(source);

					var $parent = $source.closest('table')

					var off1 = $parent.offset();

					var w1 = $parent.width();

			

					var off2 = $source.offset();

					var w2 = $source.width();

			

					if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';

					return 'left';

				}

				//排序
				$('body').on('blur' ,'.sort_input', function(){
					var _id = $(this).attr('data-id');
					var _sort=$(this).val();
					
			      	$.ajax({  
			      	    async:false,
			      	    type:'post',  
			      	    url : "{:U('Admin/AuthRule/ajax_sort')}",
			      	    dataType : 'json',
			      	    data:{'id':_id,'sort':_sort},
			      	    success  : function(json) { 
			      	        if(json.code==0){
			      	            
			      	        }else{
			      	            layer.msg(json.msg);
			      	        }
			      	    },
			      	    error  : function(json) {  
			      	        layer.msg(json.msg);
			      	    }  
			      	});  
				});

				//是否全显示
				$('.no_node').click(function(){
					
					if($('.no_node').is(':checked')) {
						$('#sample-table-1 tbody tr').hide();
					    $('#sample-table-1 tbody tr[level="非节点"]').show();
					}else{
						$('#sample-table-1 tbody tr').show();
					}
			      	
				});

				

			})

		</script>



		<input type="hidden" name="cur_c" id="cur_c" value="Node">

		<input type="hidden" name="cur_v" id="cur_v" value="index">

		<script type="text/javascript">

		  $(function(){

		    var cur_c=$('#cur_c').val();

		    var cur_v=$('#cur_v').val();



		    $('.'+cur_c).addClass('active').addClass('open');

		    $('.'+cur_c+'_'+cur_v).addClass('active');

		  });



		  



		</script>



		<script type="text/javascript">

			$(function() {

			  	$(".bootbox-confirm").on(ace.click_event, function() {

			  		var delUrl=$(this).attr('data-url');

					bootbox.confirm("Are you sure?", function(result) {

						if(result) {

							location.href =delUrl;

						}

					});

				});

			});

		</script>

<form id="pid_color_form" method="post" action="">
	<input type="text" name="pid_color" style="display:none;" class="input_pid_color" value="">
</form>		
<script>
$(function(){
		$(".pid_color").change(function(){
			$('form#pid_color_form input.input_pid_color').val($(this).val());
			$('form#pid_color_form').submit();
		});
});
</script>
	</body>

</html>

